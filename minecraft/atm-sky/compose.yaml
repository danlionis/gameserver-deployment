services:
  server:
    image: itzg/minecraft-server:latest
    environment:
      EULA: "TRUE"
      TYPE: "AUTO_CURSEFORGE"
      MEMORY: "4G"
      ENABLE_RCON: "true"
      RCON_PASSWORD: ${RCON_PASSWORD:-supersecret}
      ENABLE_QUERY: "true"
      MOTD: "beppo"
      DIFFICULTY: normal
      MODE: survival
      CF_API_KEY: ${CF_API_KEY}
      CF_SLUG: all-the-mods-10-sky
      WHITELIST: |
        FashleHD
        Daiilvorn
      OPS: |
        FashleHD
    volumes:
      - data:/data
    networks:
      - mc-router
    labels:
      mc-router.host: "atmsky.mc.dummsuff.com"

  # backup:
  #   image: itzg/mc-backup
  #   environment:
  #     BACKUP_INTERVAL: "24h"
  #     BACKUP_RETENTION_DAYS: "4"
  #     INITIAL_DELAY: "60s"
  #     RCON_HOST: server
  #     RCON_PASSWORD: ${RCON_PASSWORD:-supersecret}
  #     TZ: "Europe/Berlin"
  #   volumes:
  #     - data:/data:ro
  #     - backups:/backups
  #   networks:
  #     - mc-router
  #   depends_on:
  #     - server

volumes:
  data:
#   backups:

networks:
  mc-router:
    external: true
